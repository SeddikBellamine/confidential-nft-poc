(this["webpackJsonp@nftbuilder/react-app"]=this["webpackJsonp@nftbuilder/react-app"]||[]).push([[0],{1003:function(e,t){},1008:function(e,t){},1010:function(e,t){},1017:function(e,t){},1029:function(e,t){},1271:function(e,t){},1281:function(e,t){},1311:function(e,t){},1371:function(e,t){},1374:function(e,t){},1411:function(e,t){},1493:function(e,t){},1665:function(e,t){},1667:function(e,t){},1757:function(e,t){},1760:function(e,t){},1761:function(e,t){},1932:function(e,t){},1973:function(e,t){},1986:function(e,t){},2002:function(e,t){},2004:function(e,t){},2025:function(e,t){},2109:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(59),l=a.n(o),c=(a(928),a(568)),i=(a(929),a(2188)),s=a(224),d=a(2186),u=a(2189),p=a(857),m=a.n(p),h=a(858),f=a(129),E=a(893),g=a(118);function v({address:e,provider:t,price:a,minimized:o,web3Modal:l,loadWeb3Modal:c,logoutOfWeb3Modal:i,blockExplorer:s}){const d=[{value:"tab1",label:"NFT Builder"}],[u,p]=Object(n.useState)(d[0].value),[m,h]=Object(n.useState)(!0),f=()=>{c(),h(!m)},v=e,b=[{value:"1",label:"iExec Sidechain testnet"}],[y,w]=Object(n.useState)(b[0].value),k=[];return l&&(l.cachedProvider?k.push(r.a.createElement(g.a,{key:"logoutbutton",style:{verticalAlign:"top",marginLeft:8,marginTop:4},shape:"round",size:"large",onClick:i},"Logout")):k.push(r.a.createElement(g.a,{key:"loginbutton",style:{verticalAlign:"top",marginLeft:8,marginTop:4},shape:"round",size:"large",onClick:c},"Connect"))),r.a.createElement("div",null,r.a.createElement(E.a,{title:"Datahub",tabs:{values:d,value:u,onSelect:e=>p(e)},login:{isLoggedIn:m,onLoginClick:f,onLogoutClick:f,address:v,onAddressClick:()=>alert("onAddressClick")},network:{values:b,value:y,onSelect:e=>w(e),disabled:m},extraButtons:[{icon:r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("circle",{cx:"12",cy:"12",r:"10"}),r.a.createElement("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),r.a.createElement("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})),label:"extra button",onClick:()=>alert("clicked")}]}))}var b=a(222),y=a.n(b),w=a(2181),k=a(2183);a(335);const x="47354c4ae0f24d918a987cd667da4f15",S=e=>{for(let t in O)if(O[t].chainId===e)return O[t]},O={localhost:{name:"localhost",color:"#666666",chainId:31337,blockExplorer:"",rpcUrl:"http://"+window.location.hostname+":8545"},mainnet:{name:"mainnet",color:"#ff8b9e",chainId:1,rpcUrl:"https://mainnet.infura.io/v3/"+x,blockExplorer:"https://etherscan.io/"},kovan:{name:"kovan",color:"#7003DD",chainId:42,rpcUrl:"https://kovan.infura.io/v3/"+x,blockExplorer:"https://kovan.etherscan.io/",faucet:"https://gitter.im/kovan-testnet/faucet"},rinkeby:{name:"rinkeby",color:"#e0d068",chainId:4,rpcUrl:"https://rinkeby.infura.io/v3/"+x,faucet:"https://faucet.rinkeby.io/",blockExplorer:"https://rinkeby.etherscan.io/"},ropsten:{name:"ropsten",color:"#F60D09",chainId:3,faucet:"https://faucet.ropsten.be/",blockExplorer:"https://ropsten.etherscan.io/",rpcUrl:"https://ropsten.infura.io/v3/"+x},goerli:{name:"goerli",color:"#0975F6",chainId:5,faucet:"https://goerli-faucet.slock.it/",blockExplorer:"https://goerli.etherscan.io/",rpcUrl:"https://goerli.infura.io/v3/"+x},xdai:{name:"xdai",color:"#48a9a6",chainId:100,price:1,gasPrice:1e9,rpcUrl:"https://dai.poa.network",faucet:"https://xdai-faucet.top/",blockExplorer:"https://blockscout.com/poa/xdai/"},matic:{name:"matic",color:"#2bbdf7",chainId:137,price:1,gasPrice:1e9,rpcUrl:"https://rpc-mainnet.maticvigil.com",faucet:"https://faucet.matic.network/",blockExplorer:"https://explorer-mainnet.maticvigil.com//"},mumbai:{name:"mumbai",color:"#92D9FA",chainId:80001,price:1,gasPrice:1e9,rpcUrl:"https://rpc-mumbai.maticvigil.com",faucet:"https://faucet.matic.network/",blockExplorer:"https://mumbai-explorer.matic.today/"},iExecSidechain:{name:"iExec Test Sidechain",color:"#92D9FA",chainId:133,gasPrice:0,rpcUrl:"https://viviani.iex.ec",faucet:"https://faucet.iex.ec/viviani",blockExplorer:"https://explorer.iex.ec/viviani/"}};var C=a(33);var j=(e,t)=>{const[a,r]=Object(n.useState)(t),[o,l]=function(e,t){const[a,r]=Object(n.useState)(()=>{try{const a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(a){return console.log(a),t}});return[a,t=>{try{const n=t instanceof Function?t(a):t;r(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(n){console.log(n)}}]}("ensCache_"+t);return Object(n.useEffect)(()=>{o&&o.timestamp>Date.now()?r(o.name):e&&(async(e,t)=>{try{const a=await e.lookupAddress(t),n=await e.resolveName(a);if(Object(C.a)(t)===Object(C.a)(n))return a}catch(a){}return 0})(e,t).then(e=>{e&&(r(e),l({timestamp:Date.now()+36e4,name:e}))})},[o,e,t,r,l]),a};const{Text:P}=w.a;function N(e){const t=e.value||e.address,a=j(e.ensProvider,t);if(!t)return r.a.createElement("span",null,r.a.createElement(k.a,{avatar:!0,paragraph:{rows:1}}));let n=t.substr(0,6);a&&a.indexOf("0x")<0?n=a:"short"===e.size?n+="..."+t.substr(-4):"long"===e.size&&(n=t);const o=((e,t)=>`${t||"https://etherscan.io/"}address/${e}`)(t,e.blockExplorer);if(e.minimized)return r.a.createElement("span",{style:{verticalAlign:"middle"}},r.a.createElement("a",{target:"_blank",href:o,rel:"noopener noreferrer"},r.a.createElement(y.a,{seed:t.toLowerCase(),size:8,scale:2})));let l;return l=e.onChange?r.a.createElement(P,{editable:{onChange:e.onChange},copyable:{text:t}},r.a.createElement("a",{target:"_blank",href:o,rel:"noopener noreferrer"},n)):r.a.createElement(P,{copyable:{text:t}},r.a.createElement("a",{target:"_blank",href:o,rel:"noopener noreferrer"},n)),r.a.createElement("span",null,r.a.createElement("span",{style:{verticalAlign:"middle"}},r.a.createElement(y.a,{seed:t.toLowerCase(),size:8,scale:e.fontSize?e.fontSize/7:4})),r.a.createElement("span",{style:{verticalAlign:"middle",paddingLeft:5,fontSize:e.fontSize?e.fontSize:28}},l))}var I=a(879),D=a.n(I),F=a(2192),T=a(2193),z=a(2185),A=a(2182);function R(e){return e.address&&"function"===typeof e.address.toLowerCase?r.a.createElement(y.a,Object.assign({seed:e.address.toLowerCase()},e)):r.a.createElement("span",null)}function L(e){const[t,a]=Object(n.useState)(e.value),[o,l]=Object(n.useState)(!1),c="undefined"!==typeof e.value?e.value:t,i=Object(f.a)(e.ensProvider,c),s=r.a.createElement("div",{style:{marginTop:4,cursor:"pointer"},onClick:()=>{l(!o)}},r.a.createElement(z.a,{count:r.a.createElement(F.a,{style:{fontSize:9}})},r.a.createElement(T.a,{style:{fontSize:18}}))," ","Scan"),{ensProvider:d,onChange:u}=e,p=Object(n.useCallback)(async e=>{if("undefined"!==typeof e){let n=e;if(n.indexOf(".eth")>0||n.indexOf(".xyz")>0)try{const e=await d.resolveName(n);e&&(n=e)}catch(t){}a(n),"function"===typeof u&&u(n)}},[d,u]),m=o?r.a.createElement("div",{style:{zIndex:256,position:"absolute",left:0,top:0,width:"100%"},onClick:()=>{l(!1)}},r.a.createElement(D.a,{delay:250,resolution:1200,onError:e=>{console.log("SCAN ERROR",e),l(!1)},onScan:e=>{if(e){console.log("SCAN VALUE",e);let t=e;t.indexOf("/")>=0&&(t=t.substr(t.lastIndexOf("0x")),console.log("CLEANED VALUE",t)),l(!1),p(t)}},style:{width:"100%"}})):"";return r.a.createElement("div",null,m,r.a.createElement(A.a,{autoComplete:"off",autoFocus:e.autoFocus,placeholder:e.placeholder?e.placeholder:"address",prefix:r.a.createElement(R,{address:c,size:8,scale:3}),value:i||c,addonAfter:s,onChange:e=>{p(e.target.value)}}))}function U(e){const[t,a]=Object(n.useState)(e.price?"USD":"ETH"),[o,l]=Object(n.useState)(),[c,i]=Object(n.useState)(),s="undefined"!==typeof e.value?e.value:c,d=n=>e.price?r.a.createElement("div",{style:{cursor:"pointer"},onClick:()=>{if("USD"===t)a("ETH"),l(s);else if(a("USD"),s){const t=""+(parseFloat(s)*e.price).toFixed(2);l(t)}else l(s)}},n):"";let u,p;return"USD"===t?(u="$",p=d("USD \ud83d\udd00")):(u="\u039e",p=d("ETH \ud83d\udd00")),Object(n.useEffect)(()=>{s||l("")},[s]),r.a.createElement(A.a,{placeholder:e.placeholder?e.placeholder:"amount in "+t,autoFocus:e.autoFocus,prefix:u,value:o,addonAfter:p,onChange:async a=>{const n=a.target.value;if("USD"===t){const t=parseFloat(n);if(t){const a=t/e.price;i(a),"function"===typeof e.onChange&&e.onChange(a),l(n)}else l(n)}else i(n),"function"===typeof e.onChange&&e.onChange(n),l(n)}})}var K=a(103);function M(e){const[t,a]=Object(n.useState)(!0),[o,l]=Object(n.useState)();Object(f.b)(()=>{(async()=>{if(e.address&&e.provider)try{const t=await e.provider.getBalance(e.address);l(t)}catch(t){console.log(t)}})()},e.pollTime?e.pollTime:11999);let c=parseFloat("0.00"),i=o;if("undefined"!==typeof e.balance&&(i=e.balance),"undefined"!==typeof e.value&&(i=e.value),i){const e=Object(K.b)(i);parseFloat(e).toFixed(2),c=parseFloat(e)}let s=c.toFixed(4);const d=e.price||e.dollarMultiplier;return d&&t&&(s="$"+(c*d).toFixed(2)),r.a.createElement("span",{style:{verticalAlign:"middle",fontSize:e.size?e.size:24,padding:8,cursor:"pointer"},onClick:()=>{a(!t)}},s)}var _=a(430),q=a(2196),B=a(2),W=a(902),H=a(881);function G(e,t,a){if("undefined"!==typeof e)return async t=>{const n=e.getSigner(),r=await e.getNetwork(),o={dappId:"0b58206a-f3c0-4701-a62f-73c7243e8c77",system:"ethereum",networkId:r.chainId,transactionHandler:e=>{console.log("HANDLE TX",e)}},l=Object(H.a)(o);let c="";r.name&&r.chainId>1&&(c=r.name+".");let i="https://"+c+"etherscan.io/tx/";100===r.chainId&&(i="https://blockscout.com/poa/xdai/tx/");try{let e;if(t instanceof Promise?e=await t:(t.gasPrice||(t.gasPrice=0),t.gasLimit||(t.gasLimit=Object(B.i)(12e4)),console.log("RUNNING TX",t),e=await n.sendTransaction(t)),console.log("RESULT:",e),console.log("Notify",l),[1,3,4,5,42,100].indexOf(r.chainId)>=0){const{emitter:t}=l.hash(e.hash);t.on("all",e=>({onclick:()=>window.open((a||i)+e.hash)}))}else W.a.info({message:"Transaction Sent",description:e.hash,placement:"bottomRight"});return e}catch(s){console.log(s),console.log("Transaction Error:",s.message),W.a.error({message:"Transaction Error",description:s.message})}}}var $=a(2194),V=a(2195),J=a(2184),X=a(2178),Y=a(575),Q=a.n(Y),Z=a(339);const{Text:ee,Paragraph:te}=w.a;function ae(e){const t=Object(f.d)(e.provider),a=e.address||t,[o,l]=Object(n.useState)(),[c,i]=Object(n.useState)(),[d,u]=Object(n.useState)(),[p,m]=Object(n.useState)(),[h,E]=Object(n.useState)(),g=e.provider?r.a.createElement(_.a,{title:"Wallet"},r.a.createElement($.a,{onClick:()=>{l(!o)},rotate:-90,style:{padding:7,color:e.color?e.color:"",cursor:"pointer",fontSize:28,verticalAlign:"middle"}})):"";let v,b,y;if(c)v=r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(ee,{copyable:!0},a)),r.a.createElement(Q.a,{value:a,size:"450",level:"H",includeMargin:!0,renderAs:"svg",imageSettings:{excavate:!1}})),b=r.a.createElement(s.a,{key:"hide",onClick:()=>{i("")}},r.a.createElement(T.a,null)," Hide"),y=r.a.createElement(s.a,{key:"hide",onClick:()=>{E(a),i("")}},r.a.createElement(V.a,null)," Private Key");else if(h){let t=localStorage.getItem("metaPrivateKey"),n=new Z.ethers.Wallet(t);if(n.address!==a)v=r.a.createElement("div",null,r.a.createElement("b",null,"*injected account*, private key unknown"));else{let a={},o=[];for(var w in a[n.address]=!0,o.push(r.a.createElement("div",{style:{fontSize:16,padding:2,backgroundStyle:"#89e789"}},r.a.createElement("a",{href:"/pk#"+t},r.a.createElement(N,{minimized:!0,address:n.address,ensProvider:e.ensProvider})," ",n.address.substr(0,6)))),localStorage)if(w.indexOf("metaPrivateKey_backup")>=0){console.log(w);let t=localStorage.getItem(w),n=new Z.ethers.Wallet(t);a[n.address]||(a[n.address]=!0,o.push(r.a.createElement("div",{style:{fontSize:16}},r.a.createElement("a",{href:"/pk#"+t},r.a.createElement(N,{minimized:!0,address:n.address,ensProvider:e.ensProvider})," ",n.address.substr(0,6)))))}v=r.a.createElement("div",null,r.a.createElement("b",null,"Private Key:"),r.a.createElement("div",null,r.a.createElement(ee,{copyable:!0},t)),r.a.createElement("hr",null),r.a.createElement("i",null,"Point your camera phone at qr code to open in",r.a.createElement("a",{target:"_blank",href:"https://xdai.io/"+t,rel:"noopener noreferrer"},"burner wallet"),":"),r.a.createElement(Q.a,{value:"https://xdai.io/"+t,size:"450",level:"H",includeMargin:!0,renderAs:"svg",imageSettings:{excavate:!1}}),r.a.createElement(te,{style:{fontSize:"16"},copyable:!0},"https://xdai.io/"+t),o?r.a.createElement("div",null,r.a.createElement("h3",null,"Known Private Keys:"),o,r.a.createElement(s.a,{onClick:()=>{let e=window.localStorage.getItem("metaPrivateKey");e&&window.localStorage.setItem("metaPrivateKey_backup"+Date.now(),e);const t=Z.ethers.Wallet.createRandom()._signingKey().privateKey;window.localStorage.setItem("metaPrivateKey",t),window.location.reload()}},"Generate")):"")}b=r.a.createElement(s.a,{key:"receive",onClick:()=>{i(a),E("")}},r.a.createElement(T.a,null)," Receive"),y=r.a.createElement(s.a,{key:"hide",onClick:()=>{E(""),i("")}},r.a.createElement(V.a,null)," Hide")}else{const t={padding:10};v=r.a.createElement("div",null,r.a.createElement("div",{style:t},r.a.createElement(L,{autoFocus:!0,ensProvider:e.ensProvider,placeholder:"to address",address:p,onChange:m})),r.a.createElement("div",{style:t},r.a.createElement(U,{price:e.price,value:d,onChange:e=>{u(e)}}))),b=r.a.createElement(s.a,{key:"receive",onClick:()=>{i(a),E("")}},r.a.createElement(T.a,null)," Receive"),y=r.a.createElement(s.a,{key:"hide",onClick:()=>{E(a),i("")}},r.a.createElement(V.a,null)," Private Key")}return r.a.createElement("span",null,g,r.a.createElement(J.a,{visible:o,title:r.a.createElement("div",null,a?r.a.createElement(N,{address:a,ensProvider:e.ensProvider}):r.a.createElement(X.a,null),r.a.createElement("div",{style:{float:"right",paddingRight:25}},r.a.createElement(M,{address:a,provider:e.provider,dollarMultiplier:e.price}))),onOk:()=>{i(),E(),l(!o)},onCancel:()=>{i(),E(),l(!o)},footer:[y,b,r.a.createElement(s.a,{key:"submit",type:"primary",disabled:!d||!p||c,loading:!1,onClick:()=>{const t=G(e.provider);let a;try{a=Object(K.d)(""+d)}catch(n){a=Object(K.d)(""+parseFloat(d).toFixed(8))}t({to:p,value:a}),l(!o),i()}},r.a.createElement(q.a,null)," Send")]},v))}function ne(e){const[t,a]=Object(n.useState)();let o;o=t&&"function"===typeof t.toLowerCase?r.a.createElement(y.a,{seed:t.toLowerCase(),size:8,scale:4}):r.a.createElement("div",null);const l=Object(f.a)(e.ensProvider,t),c=Object(n.useCallback)(async t=>{if("undefined"!==typeof t){let r=t;if(r.indexOf(".eth")>0||r.indexOf(".xyz")>0)try{const t=await e.ensProvider.resolveName(r);t&&(r=t)}catch(n){}a(r)}},[e.ensProvider]),i=G(e.localProvider);return r.a.createElement("span",null,r.a.createElement(A.a,{size:"large",placeholder:e.placeholder?e.placeholder:"local faucet",prefix:o,value:l||t,onChange:e=>{c(e.target.value)},suffix:r.a.createElement(_.a,{title:"Faucet: Send local ether to an address."},r.a.createElement(s.a,{onClick:()=>{i({to:t,value:Object(K.d)("0.01")}),a("")},shape:"circle",icon:r.a.createElement(q.a,null)}),r.a.createElement(ae,{color:"#888888",provider:e.localProvider,ensProvider:e.ensProvider,price:e.price}))}))}var re=a(898);const oe={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},le={borderColor:"#fcd15a"},ce={borderColor:"#fcd15a"},ie={borderColor:"#ff1744"};function se(e){const{acceptedFiles:t,getRootProps:a,getInputProps:o,isFocused:l,isDragAccept:c,isDragReject:i}=Object(re.a)(),s=t.map(e=>r.a.createElement("li",{key:e.path},e.path," - ",e.size," bytes"));Object(n.useEffect)(()=>{t&&e.parentCallback(t)},[t]);const d=Object(n.useMemo)(()=>({...oe,...l?le:{},...c?ce:{},...i?ie:{}}),[l,c,i]);return r.a.createElement("section",{className:"container"},r.a.createElement("div",{className:"container"},r.a.createElement("div",a({style:d}),r.a.createElement("input",o()),r.a.createElement("p",null,"Drag 'n' drop your dataset file here, or click to select a file"))),r.a.createElement("aside",null,r.a.createElement("h4",null,"File"),r.a.createElement("ul",null,s)))}var de=a(111),ue=a(2180),pe=a(429),me=a(886);const he=Object(ue.a)({container:{width:"70%",paddingTop:"50px",paddingLeft:"20px",flexDirection:"column",flex:1},input:{paddingTop:"25px",width:600,maxWidth:800},divider:{marginTop:"20px",marginLeft:"0px",height:"200px"},dividerlast:{marginTop:"20px",marginLeft:"0px",height:"300px"},dividertee:{height:"40px"},deploydataset:{paddingTop:"400px"},pushtEncryptionkeytosms:{paddingTop:"200px"},publishteedatasetorder:{paddingTop:"200px"},orderbook:{paddingTop:"200px"}});function fe({address:e,readProvider:t,writeProvider:a,contracts:o,tx:l,iexec:c}){const[i,s]=Object(n.useState)(""),[d,u]=Object(n.useState)([]),[p,m]=Object(n.useState)(""),[h,f]=Object(n.useState)(""),[E,v]=Object(n.useState)(""),[b,y]=Object(n.useState)(""),[w,k]=Object(n.useState)(""),[x,S]=Object(n.useState)(""),O=e=>S(e.target.value),[C,j]=Object(n.useState)(""),[P,N]=Object(n.useState)("0x0000000000000000000000000000000000000000"),[I,D]=Object(n.useState)("0x0000000000000000000000000000000000000000"),[F,T]=Object(n.useState)(""),[z,A]=Object(n.useState)(""),[R,L]=Object(n.useState)([]),[U,K]=Object(n.useState)(!1),[M,_]=Object(n.useState)(""),[q,B]=Object(n.useState)(""),[W,H]=Object(n.useState)(!1),[G,$]=Object(n.useState)(!1),[V,J]=Object(n.useState)(!1),[X,Y]=Object(n.useState)(""),[Q,Z]=Object(n.useState)([]),[ee,te]=Object(n.useState)(""),ae=Object(n.useRef)(null),ne=Object(n.useRef)(null),re=Object(n.useRef)(null),oe=e=>new Promise(t=>setTimeout(t,e)),le=he();return r.a.createElement("div",{className:le.container},r.a.createElement("div",{className:"prepareencryptionkey"},r.a.createElement("h2",null,"Prepare Confidential NFT"),r.a.createElement(g.a,{onClick:async()=>{try{const e=c.dataset.generateEncryptionKey();s(e),m(e)}catch(e){console.log(e)}}},"Generate Encryption Key"),r.a.createElement(de.a,{className:le.input,label:"Encryption key",value:p,onChange:e=>m(e.target.value),placeholder:"base64 encoded aes 256 key"}),r.a.createElement(se,{parentCallback:e=>{u(e)}}),U?r.a.createElement(pe.a,null):r.a.createElement(g.a,{onClick:async()=>{try{K(!0);const e=d[0];if(!e)throw Error("No file selected");L([r.a.createElement("p",null,"Reading File ",e.name," ")]),console.log("Reading "+e.name);const t=await new Promise((t,a)=>{const n=new FileReader;n.readAsArrayBuffer(e),n.onload=e=>t(e.target.result),n.onerror=()=>a(Error("Failed to read file: "+n.error)),n.onabort=()=>a(Error("Failed to read file: aborted"))});L(t=>[...t,r.a.createElement("p",null,"Encrypting ",e.name," ")]);const a=await c.dataset.encrypt(t,i),n=await c.dataset.computeEncryptedFileChecksum(a);L(e=>[...e,r.a.createElement("p",null,"Uploading encrypted file to IPFS ")]);const o="/ipfs/"+(await Object(me.a)(a)).toString(),l="https://ipfs.io"+o;f(e.name),v(o),y(n),L(e=>[...e,r.a.createElement("p",null,"Checking file on IPFS on ",r.a.createElement("a",{href:l},l)," ")]),await fetch(l).then(e=>{if(!e.ok)throw Error("Failed to load uploaded file at "+l)}),K(!1),L(e=>[...e,r.a.createElement("p",null,"File encrypted and uploded to IPFS (checksum ",n,") ")]),await oe(4e3),ae.current.scrollIntoView({block:"end",behavior:"smooth"})}catch(e){console.log(e)}}},"Encrypt and Upload File"),r.a.createElement("div",null,R.map((e,t)=>r.a.createElement("div",{key:t},e)))),r.a.createElement("div",{className:le.deploydataset},r.a.createElement("h2",null,"Deploy Confidential NFT"),r.a.createElement(de.a,{className:le.input,label:"NFT Name",value:h,onChange:e=>f(e.target.value),placeholder:"Dataset name"}),r.a.createElement(de.a,{className:le.input,label:"File url/ipfs",value:E,onChange:e=>v(e.target.value),placeholder:"Dataset Name"}),r.a.createElement(de.a,{className:le.input,label:"File checksum",value:b,onChange:e=>y(e.target.value),placeholder:"encrypted file sha256sum"}),W?r.a.createElement(pe.a,null):r.a.createElement(g.a,{onClick:async()=>{try{H(!0);const e=await c.wallet.getAddress(),t=h,a=E,n=b,{address:r}=await c.dataset.deployDataset({owner:e,name:t,multiaddr:a,checksum:n});H(!1),_("Dataset deployed at address "+r),k(p),S(r),await oe(4e3),ne.current.scrollIntoView({block:"end",behavior:"smooth"})}catch(e){console.log(e)}}},"Deploy DataSet"),r.a.createElement("p",null,M)),r.a.createElement("div",{className:le.divider,id:"deploydataset",ref:ae}),r.a.createElement("div",{className:le.pushtEncryptionkeytosms},r.a.createElement("h2",null,"Deploy Encryption Key"),r.a.createElement(de.a,{className:le.input,label:"Encryption Key",value:w,onChange:e=>k(e.target.value),placeholder:"Dataset Key"}),r.a.createElement(de.a,{className:le.input,label:"Dataset address",value:x,onChange:O,placeholder:"Dataset address"}),r.a.createElement(g.a,{onClick:async()=>{try{await c.dataset.pushDatasetSecret(x,w),B("Encryption key pushed for datastet "+x),await oe(4e3),re.current.scrollIntoView({block:"end",behavior:"smooth"})}catch(e){console.log(e)}}},"Push Encryption Key"),r.a.createElement("p",null,q)),r.a.createElement("div",{className:le.divider,ref:ne}),r.a.createElement("div",{className:le.publishteedatasetorder},r.a.createElement("h2",null,"Grant Usage of your Confidential NFT"),r.a.createElement(de.a,{className:le.input,label:"Dataset address",value:x,onChange:O,placeholder:"Dataset address"}),r.a.createElement(de.a,{className:le.input,label:"#Access",value:C,onChange:e=>j(e.target.value),placeholder:"1"}),r.a.createElement(de.a,{className:le.input,label:"Restrict to app",value:P,onChange:e=>N(e.target.value),placeholder:"0x0000000000000000000000000000000000000000"}),r.a.createElement(de.a,{className:le.input,label:"Restrict to user",value:I,onChange:e=>D(e.target.value),placeholder:"0x0000000000000000000000000000000000000000"}),r.a.createElement(g.a,{onClick:async()=>{try{const e=x,t=0,a=C,n=P,r=I,o=["tee"],l=await c.order.signDatasetorder(await c.order.createDatasetorder({dataset:e,datasetprice:t,volume:a,apprestrict:n,requesterrestrict:r,tag:o})),i=await c.order.publishDatasetorder(l);console.log("Order published with hash "+i),T(i),alert("Order published with hash "+i)}catch(e){console.log(e)}}},"Authorize"),r.a.createElement(de.a,{className:le.input,label:"Order hash",value:F,onChange:e=>T(e.target.value),placeholder:"Order hash"}),r.a.createElement(g.a,{onClick:async()=>{try{const{order:e}=await c.orderbook.fetchDatasetorder(F),{txHash:t}=await c.order.cancelDatasetorder(e);alert(`Order canceled (tx:${t})`)}catch(e){console.log(e)}}},"Cancel Authorization")),r.a.createElement("div",{className:le.dividertee,ref:re}),r.a.createElement("div",{className:le.orderbook},r.a.createElement("h2",null,"Run in demo app"),r.a.createElement(g.a,{onClick:async()=>{try{const e=await c.storage.defaultStorageLogin();await c.storage.pushStorageToken(e,{forceUpdate:!0}),(async()=>{try{const e=await c.storage.checkStorageTokenExists(await c.wallet.getAddress());Y(e?"initialized":"not initialized")}catch(e){console.log(e)}})()}catch(e){console.log(e)}finally{J(!0)}},disabled:V},"Init Storage"),r.a.createElement("p",null,X),r.a.createElement(de.a,{className:le.input,label:"Dataset address",value:x,onChange:O,placeholder:"Dataset address"}),G?r.a.createElement(pe.a,null):r.a.createElement(g.a,{onClick:async()=>{try{$(!0);const e="0xdeC82933E48E5A0ac4BC0e0ffE9d994f027e01F4",t=x,a=await c.wallet.getAddress(),{orders:n}=await c.orderbook.fetchAppOrderbook(e,{minTag:["tee"]}),o=n&&n[0]&&n[0].order;if(!o)throw Error("no apporder found for app "+e);const l=(await c.orderbook.fetchDatasetOrderbook(t,{requester:a})).orders[0].order,i=await c.orderbook.fetchWorkerpoolOrderbook({workerpool:"0x86F2102532d9d01DA8084c96c1D1Bdb90e12Bf07",app:e,requester:a,minTag:["tee"]});console.log(i.orders[0].order);const s=i.orders[0].order,d=await c.order.createRequestorder({app:e,appmaxprice:o.appprice,dataset:t,datasetmaxprice:l.datasetprice,workerpoolmaxprice:s.workerpoolprice,requester:a,volume:1,params:"",tag:["tee"],category:s.category}),u=await c.order.signRequestorder(d);console.log(l);const{dealid:p}=await c.order.matchOrders({apporder:o,datasetorder:l,requestorder:u,workerpoolorder:s}),m="https://explorer.iex.ec/viviani/deal/"+p,h=await c.deal.show(p);A(h.tasks[0]),Z([r.a.createElement("p",null,"submitted deal check deal Url on ",r.a.createElement("a",{href:m},m)," ")]),te("Task Running!"),$(!1)}catch(e){console.log(e)}}},"Run App"),r.a.createElement("div",null,Q[0]),r.a.createElement("div",null,ee),r.a.createElement(de.a,{className:le.input,label:"Task id",value:z,onChange:e=>A(e.target.value),placeholder:"Task id"}),r.a.createElement(g.a,{onClick:async()=>{try{const e=await c.task.fetchResults(z),t=await e.blob(),a=z+".zip";window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(t,a)}catch(e){console.log(e),alert(e)}}},"Download Task Result")),r.a.createElement("div",{className:le.dividerlast}))}const Ee=O.iExecSidechain,ge=Ee.blockExplorer;const ve=new m.a({cacheProvider:!0,providerOptions:{}}),be=async()=>{await ve.clearCachedProvider(),setTimeout(()=>{window.location.reload()},1)};window.ethereum&&window.ethereum.on("chainChanged",e=>{setTimeout(()=>{window.location.reload()},1)});var ye=function(e){var t;const[a,o]=Object(n.useState)(),[l,p]=Object(n.useState)(),m=Object(f.d)(a);let E=null===a||void 0===a||null===(t=a._network)||void 0===t?void 0:t.chainId,g=null===Ee||void 0===Ee?void 0:Ee.chainId,b="";var y,w;b=(null===Ee||void 0===Ee?void 0:Ee.chainId)&&E&&Ee.chainId!==E?r.a.createElement("div",{style:{zIndex:2,position:"absolute",right:0,top:60,padding:16}},r.a.createElement(i.a,{message:"\u26a0\ufe0f Wrong Network",description:r.a.createElement("div",null,"You have"," ",r.a.createElement("b",null,null===(y=S(E))||void 0===y?void 0:y.name,"(",E,")")," ","selected and you need to be on"," ",r.a.createElement("b",null,null===(w=S(null===Ee||void 0===Ee?void 0:Ee.chainId))||void 0===w?void 0:w.name," (",g,")"),"."),type:"error",closable:!1})):r.a.createElement("div",{style:{zIndex:-1,position:"absolute",right:154,top:28,padding:16,color:Ee.color}},Ee.name);const k=Object(n.useCallback)(async()=>{let e;if(!window.ethereum)throw Error("Need to install MetaMask");e=window.ethereum,e.on("chainChanged",e=>window.location.reload()),e.on("accountsChanged",e=>window.location.reload()),await window.ethereum.request({method:"eth_requestAccounts"}),window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x85",chainName:"iExec Test Sidechain",nativeCurrency:{name:"xRLC",symbol:"xRLC",decimals:18},rpcUrls:["https://viviani.iex.ec"],blockExplorerUrls:["https://blockscout-viviani.iex.ec"]}]});try{await window.ethereum.request({method:"eth_requestAccounts"})}catch(a){throw Error("User denied access",a)}const t=new c.a(e);o(t),p(new h.IExec({ethProvider:e},{isNative:!0}))},[o]);Object(n.useEffect)(()=>{ve.cachedProvider&&k()},[k]);const[x,O]=Object(n.useState)();Object(n.useEffect)(()=>{O(window.location.pathname)},[O]);let C="";const j=a&&a.connection&&"localhost"===Ee.name,[P,N]=Object(n.useState)(!1);return!P&&a&&a._network&&31337===a._network.chainId&&(C=r.a.createElement("div",{style:{padding:16}},r.a.createElement(s.a,{type:"primary",onClick:()=>{N(!0)}},r.a.createElement("span",{role:"img","aria-label":"funds"},"\ud83d\udcb0")," Grab funds from the faucet ",r.a.createElement("span",{role:"img","aria-label":"gas"},"\u26fd\ufe0f")))),r.a.createElement("div",{className:"App"},b,m?r.a.createElement(fe,{address:m,writeProvider:a,iexec:l}):r.a.createElement("div",{style:{paddingTop:"130px"}},"Connect your wallet to use the Dapp!"),r.a.createElement("div",{style:{position:"fixed",textAlign:"right",left:0,right:0,top:0}},r.a.createElement(v,{address:m,provider:a,web3Modal:ve,loadWeb3Modal:k,logoutOfWeb3Modal:be,blockExplorer:ge}),C),r.a.createElement("div",{style:{position:"fixed",textAlign:"left",left:0,bottom:20,padding:10}},r.a.createElement(d.a,{align:"middle",gutter:[4,4]},r.a.createElement(u.a,{span:24},j?r.a.createElement(ne,{localProvider:a}):""))))},we=a(897);l.a.render(r.a.createElement(we.a,null,r.a.createElement(ye,null)),document.getElementById("root"))},494:function(e,t){},541:function(e,t){},886:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return o}));var n=a(887),r=a.n(n);const o=async(t,{ipfsGateway:a="https://ipfs.io"}={})=>{const n=await r.a.create();try{const{cid:r}=await n.add(t);return await n.pin.add(r,{timeout:1e4}).catch(e=>console.log("Ipfs add pin failed",e)),await(async(t,{ipfsGateway:a="https://ipfs.io"}={})=>{const n=`${a}${"/ipfs/"+t.toString()}`,r=await fetch(n);if(!r.ok)throw Error("Failed to load content from "+n);const o=await r.arrayBuffer();return e.from(o)})(r.toString(),{ipfsGateway:a}),await n.stop(),r.toString()}catch(o){throw"function"===typeof n.stop&&await n.stop(),o}}}).call(this,a(11).Buffer)},888:function(e,t){},889:function(e,t){},923:function(e,t,a){e.exports=a(2109)},928:function(e,t,a){},929:function(e,t,a){},935:function(e,t){},952:function(e,t){},954:function(e,t){},956:function(e,t){},964:function(e,t){},966:function(e,t){},976:function(e,t){},978:function(e,t){}},[[923,1,2]]]);
//# sourceMappingURL=main.3a2e5218.chunk.js.map